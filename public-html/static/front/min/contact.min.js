$(document).ready(function() {

      $.validator.addMethod("customemail", 
        function(value, element) {
            return /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(value);
        }, 
        "Sorry, I've enabled very strict email validation"
      );

  });


$("#contact_submit").on("click", function() {

  var form = $("#contact_form");
  form.validate();

  if(form.valid() === true) {
    
    $("#contact_message_sending").removeAttr('hidden');
    
    $.ajax({
      url: "./?q=Ajax/SaveEnquiry",
      type: "POST",
      data: $("#contact_form").serialize(),
      dataType: "text",

      success: function (data) {
       data_obj = $.parseJSON(data);
        $("#contact_message_sending" ).attr("hidden",true);

        if(data_obj.status == "success") {
        console.log("success");          
          $("#contact_message" ).removeAttr('hidden');
          $('#contact_form')[0].reset();
          setTimeout(function(){ $("#contact_message" ).attr("hidden",true); }, 5000);
        } else {
          console.log(data_obj.status);
          $("#contact_error_message" ).removeAttr('hidden');
          $("#inquiry_error_message" ).html(data_obj.message);
          setTimeout(function(){ $("#contact_error_message" ).attr("hidden",true); }, 5000);
        }
      },
      error: function(data) {
        //console.log(data);
      }
    });

  } else {

    $("#contact_form").validate({
      rules: {
        first_name : "required",
        last_name : "required",
        email : {
          required : true,
          customemail : true
        },
      },
      messages: {
        first_name : "Please enter your first name",
        last_name : "Please enter your last name",
        email : {
          required : "Please enter email",
          customemail : "Please enter a valid email address"
        },
      },
    });
  }

});
